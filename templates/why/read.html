{% extends "why/boilerplate.html" %}

{% block title %}Task?{% endblock %}

{% block content %}

{% if  user.is_authenticated %}

<!-- WHAT UP -->

{% if zoom_id > 0 %}

    {% if what_now.result %}
        <form action="/update/{{zoom_id}}" method="post">
            To&nbsp;<div id="resultshow" style="display:inline;"><a href='/read/{{what_now.result.id}}'>{{ what_now.result.action }}</a>
            (<a href="#" onClick="javascript:document.getElementById('resultedit').style.display = 'inline';document.getElementById('resultshow').style.display = 'none';">move</a>)</div><div id="resultedit" style="display:none;">{{ what_now_form.result }}<input type="submit" value="Update"/></div>
        
        {% for what in what_ups reversed %}
            {% if not forloop.first %}
                to&nbsp;<a href="/read/{{what.id}}">{{ what.action }}</a>{% if forloop.last %}<br/>{% else %}, {% endif %}
            {% endif %}
        {% endfor %}
        </form>
    {% endif %}

    <h1><form action="/update/{{zoom_id}}" method="post">
        {% csrf_token %}
        <div id="actionshow" style="display:inline;">{% if not what_now.result %}To{% else %}to{% endif %}&nbsp;<strong>{{ what_now.action }}</strong> (<a href="#" onClick="javascript:document.getElementById('actionedit').style.display = 'inline';document.getElementById('actionshow').style.display = 'none';">edit</a>)
        </div><div id="actionedit" style="display:none;">do&nbsp;{{ what_now_form.action }}<input type="submit" value="Update"/></div>
    </form></h1>

    {% for whatd in what_downs %} 
        <h2><form action="/delete/{{whatd.id}}" method="get">{% csrf_token %}do <a href="/read/{{whatd.id}}">{{whatd.action}}</a>,
            <input type="submit" onclick="return confirm('Are you sure you wish to delete this TaskWhat?')" value="Del."/>
        </form></h2>
    {% endfor %} 
    <h2><form action="/create/" method="post">
        {% csrf_token %} 
        {{what_new_form.result}}
        {% if what_downs %} and/or do {% else %} Do {% endif %}{{what_new_form.action}} <input type="submit" value="Add"/>.
    </form></h2>

{% else %}
        <UL>
        {% for what in what_tops %}
        <LI>To <a href="/read/{{what.id}}">{{ what.action }}</a></li> 
        {% endfor %} 
        <LI><form action="/create/" method="post">{% csrf_token %}To {{what_new_form.action}}</form></LI> 
    </UL> 
{% endif %} 

{% else %}

<P>
    The <a href="/accounts/login">login</a> has indications for account creation and demo-account user login if you do not already have an account.</P>

{% endif%}

{% endblock %}

